NPAG

0.0 MCP ENGINE NOTE (HARD)
0.0.1 When the MCP engine runs T&P via run_tp_days, it rolls the NPAG gate and determines how many NPCs require agency resolution. This appears as a pending request from get_pending_requests.
0.0.2 The agent resolves NPAG content (which NPCs act, what they do) using the rules below, then commits results via apply_llm_judgments.
0.0.3 All dice rolls within NPAG resolution (e.g., 1d3/2d4/3d6 for NPC count) MUST use macros-engine:roll_dice if available.

1.0 Trigger: NPAG
1.1 Resolve NPC agency only (use NPC OBJ/ACT from JSON save and PARTY-SEED as constraints; consult LORE-NPCS for canonical personality/history, LORE-FACTIONS for faction agenda/culture, and LORE-WORLD for historical context of named NPCs to ensure agency actions are in character)
1.2 Resolve actions for amount of NPCs based on Campaign_Intensity_Level from JSON save:
1.2.1 low=1d3 NPCs; medium=2d4 NPCs; high=3d6 NPCs; extreme=all NPCs with relevant OBJ or ACT pursue them.
1.3 Prohibition: do not advance clocks/PEs here unless an NPC agency action explicitly satisfies an existing clock ADV bullet or an authorised PE output explicitly says it advances a clock
1.4 Apply resulting state updates
1.5 Update JSON save state: npcs, factions, clocks, discoveries, losses_irreversibles, adjudication as applicable.
1.6 Return to caller (T&P/TRAVEL); caller handles NARR timing
